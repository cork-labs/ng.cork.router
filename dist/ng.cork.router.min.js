!function(a){"use strict";var b=a.module("ng.cork.router",["ngRoute"]),c=(a.copy,a.isString);b.provider("corkRouter",["$routeProvider",function(b){var d={},e=function(e,f){if(!c(e)||!e.length)throw new Error('Invalid route name "'+e+'".');if(d[e])throw new Error('Duplicate route "'+e+'".');if(!a.isObject(f))throw new Error('Invalid params "'+f+'" in route "'+e+'".');if(!c(f.path)||!f.path.length)throw new Error('Invalid path "'+f.path+'" in route "'+e+'".');f.name=e,d[e]=a.copy(f),(f.controller||f.template||f.templateUrl)&&(delete f.path,b.when(f.path,f))},f=function(a,c){b.when(a,{redirectTo:c})},g=function(a){if(!d.hasOwnProperty(a))throw new Error('Unknown route "'+a+'".');return d[a]},h=function(a,b){var c,d,e,f=g(a).path;return f=f.replace(/(\/)?:(\w+)(\?|\*)?/g,function(f,g,h,i){if(c=b.hasOwnProperty(h),"?"!==i&&!c)throw new Error('Missing parameter "'+h+'" when building URL for route "'+a+'".');return d=":"+h,"?"===i?(d+="\\?",c&&b[h]||(d="/"+d)):"*"===i&&(d+="\\*"),e=c&&b[h]||"",f.replace(new RegExp(d),e)})};this.addRoute=e,this.addRedirect=f,this.when=b.when,this.otherwise=b.otherwise,this.getRoute=g,this.getURL=h,this.$routeProvider=b,this.$get=["$route","$routeParams","$location",function(a,c,d){var i={addRoute:e,addRedirect:f,when:b.when,otherwise:b.otherwise,getRoute:g,getURL:function(a,b){return h(a,b)},goTo:function(a,b){return d.url(h(a,b))}};return i.$route=a,i.$params=c,i}]}])}(angular);